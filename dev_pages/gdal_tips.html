

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Intro to gdal &mdash; dnppy 1.15.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="dnppy 1.15.2 documentation" href="../index.html"/>
        <link rel="next" title="GitHub Best Practices" href="contrib_git.html"/>
        <link rel="prev" title="Future Development Goals" href="dev_goals.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> dnppy</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Purpose and Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#scope">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#structure">Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#how-to-install">How to Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#included-packages">Included Packages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../design.html#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design.html#functional-format">Functional Format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modulesum.html">Exploring the modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modulesum.html#module-summary">Module Summary</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/convert.html">convert</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/convert.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/convert.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/core.html">core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/core.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/core.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/download.html">download</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/download.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/download.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/landsat.html">landsat</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/landsat.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/landsat.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/modis.html">modis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/modis.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/modis.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/radar.html">radar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/radar.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/radar.html#module-dnppy.radar.create_header">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/raster.html">raster</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/raster.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/raster.html#module-dnppy.raster.apply_linear_correction">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/solar.html">solar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/solar.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/solar.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/textio.html">textio</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/textio.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/textio.html#module-dnppy.textio.read_DS3505">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/tsa.html">tsa</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/tsa.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/tsa.html#code-help">Code Help</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developers</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="development.html">Developers Starter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development.html#contributing-through-github">Contributing Through GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html#integrated-development-environment">Integrated Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="development.html#stylistic-coding-conventions">Stylistic Coding Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev_goals.html">Future Development Goals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dev_goals.html#dump-arcpy">Dump arcpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_goals.html#python-3">Python 3</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Intro to gdal</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#gdal-with-dnppy">gdal with dnppy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-osr-to-manage-projections">Using the osr to manage projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#geotransforms">Geotransforms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contrib_git.html">GitHub Best Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contrib_git.html#what-to-include-in-a-git-repo">What to include in a Git repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="contrib_git.html#committing-to-the-master-branch">Committing to the <code class="docutils literal"><span class="pre">master</span></code> branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="contrib_git.html#versioning">Versioning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="doc.html">Building Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="doc.html#documenting-new-additions">Documenting new additions</a></li>
<li class="toctree-l2"><a class="reference internal" href="doc.html#checking-the-docs">Checking the docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="doc.html#building-the-docs">Building the docs</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Help and Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../trub/git.html">GitHub Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trub/pythonstarter.html">Python Quick-Starter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../trub/pythonstarter.html#the-right-mindset">The right mindset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trub/pythonstarter.html#frequent-pitfalls">Frequent Pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trub/pythonstarter.html#python-terminology">Python Terminology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trub/faq.html">Frequently Asked Questions</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">dnppy</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Intro to gdal</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/dev_pages/gdal_tips.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="intro-to-gdal">
<h1>Intro to gdal<a class="headerlink" href="#intro-to-gdal" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference external" href="http://www.gdal.org/">geospatial data abstraction library (gdal)</a> is an open source translator library for raster and vector data formats. It is typically used as a <a class="reference external" href="https://en.wikipedia.org/wiki/Command-line_interface">command line utility</a>, but has <a class="reference external" href="https://en.wikipedia.org/wiki/Language_binding">bindings</a> for many popular programming languages including python.</p>
<dl class="docutils">
<dt>gdal utilities:</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://www.gdal.org/gdal_utilities.html">Raster utilities</a></li>
<li><a class="reference external" href="http://www.gdal.org/ogr_utilities.html">Vector utilities</a></li>
</ul>
</dd>
</dl>
<div class="section" id="gdal-with-dnppy">
<h2>gdal with dnppy<a class="headerlink" href="#gdal-with-dnppy" title="Permalink to this headline">¶</a></h2>
<p>As an example, <code class="docutils literal"><span class="pre">download.fetch_SRTM</span></code> has an option to mosaic the downloaded DEM tiles into one tif, and accomplishes this mosaic operation with a call to <code class="docutils literal"><span class="pre">`gdalwarp`_</span></code>. The syntax for this command is something like:</p>
<div class="highlight-python"><div class="highlight"><pre>gdalwarp image1 image2 output_mosaic
</pre></div>
</div>
<p>which is pretty easy to put together for any number of images if you have a list of images to mosaic, and an output name. There exists a function in the core module of dnppy for compiling more complex data structures into a simple string of space delimited arguments and running it called <code class="docutils literal"><span class="pre">run_command</span></code>. In the case of <code class="docutils literal"><span class="pre">download.fetch_SRTM</span></code>, the syntax looks like</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">core</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="s">&quot;gdalwarp&quot;</span><span class="p">,</span> <span class="n">tile_list</span><span class="p">,</span> <span class="n">out_mosaic</span><span class="p">)</span>
</pre></div>
</div>
<p>which will work for an unlimited number of input image filepaths inside of <code class="docutils literal"><span class="pre">tile_list</span></code>.</p>
</div>
<div class="section" id="using-the-osr-to-manage-projections">
<h2>Using the osr to manage projections<a class="headerlink" href="#using-the-osr-to-manage-projections" title="Permalink to this headline">¶</a></h2>
<p>gdal is actually distributed with osgeo, and another package in osgeo is the Object Spatial Reference library (osr). This library has all kinds of projection information stored within it in a text like format organized by EPSG number. A good way to find the EPSG number for a projection you are familiar with is to look it up on <a class="reference external" href="http://spatialreference.org/">spatialreference.org</a>. These EPSG numbers are used almost exclusively by gdal when dealing with projections and coordinate systems. You can access the perhaps more familiar text version of the projection information from the osr library with.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">osr</span>

<span class="n">my_projection_number</span> <span class="o">=</span> <span class="mi">4326</span>         <span class="c"># EPSG for WGS 1984 geographic coordinate system</span>

<span class="n">srs</span> <span class="o">=</span> <span class="n">osr</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">()</span>
<span class="n">srs</span><span class="o">.</span><span class="n">ImportFromEPSG</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">my_projecton_number</span><span class="p">))</span>
<span class="n">projection_text</span> <span class="o">=</span> <span class="n">srs</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">projection_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="geotransforms">
<h2>Geotransforms<a class="headerlink" href="#geotransforms" title="Permalink to this headline">¶</a></h2>
<p>There are a couple steps needed to map a location in real space on the surface of a spheroid (Earth) to a flat plane on your computer monitor. The first step is to use a geographic or projected coordinate system, that maps a real lat/lon coordinates on the earth to a flat set of grid points, your coordinate space. The second step is to map this coordinate space to the pixel or matrix space of the specific raster, so that it may be displayed on a monitor with every pixel in the correct location. Projection data contains all the information required for the first step, but geotransform data is required to accomplish the second. The information in a gdal geotransform is <strong>similar</strong> but <strong>not identical</strong> to the information used in <a class="reference external" href="https://en.wikipedia.org/wiki/World_file">world files</a> with a <code class="docutils literal"><span class="pre">.tfw</span></code> extension. It is a set of 6 coefficients to a set of two equations that transform image space (i,j) matrix coordinates, into projected space (x,y) coordinates according to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="n">iB</span> <span class="o">+</span> <span class="n">jC</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">D</span> <span class="o">+</span> <span class="n">iE</span> <span class="o">+</span> <span class="n">jF</span>
</pre></div>
</div>
<p>where the geotransform itself is simply listed as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">F</span><span class="p">]</span>
</pre></div>
</div>
<p>In a raster image with adequate georeference information, this geotransform should be recognized by gdal when reading in any supported raster data format. Sometimes, the information is NOT embedded in a universal format, and the user has to define it based on the resolution and extents of the raster dataset. This is what we have done for a few NASA data formats in the <code class="docutils literal"><span class="pre">`datatype_library`_</span></code> within the <a class="reference internal" href="../modules/convert.html"><em>convert module</em></a>.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contrib_git.html" class="btn btn-neutral float-right" title="GitHub Best Practices">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dev_goals.html" class="btn btn-neutral" title="Future Development Goals"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.15.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>