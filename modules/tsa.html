

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tsa &mdash; dnppy 1.15.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="dnppy 1.15.2 documentation" href="../index.html"/>
        <link rel="next" title="Developers Starter" href="../dev_pages/development.html"/>
        <link rel="prev" title="textio" href="textio.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> dnppy</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Purpose and Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#scope">Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html#structure">Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#how-to-install">How to Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#included-packages">Included Packages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../design.html#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design.html#functional-format">Functional Format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modulesum.html">Exploring the modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modulesum.html#module-summary">Module Summary</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="convert.html">convert</a><ul>
<li class="toctree-l2"><a class="reference internal" href="convert.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.html">core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="core.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="core.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="download.html">download</a><ul>
<li class="toctree-l2"><a class="reference internal" href="download.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="download.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="landsat.html">landsat</a><ul>
<li class="toctree-l2"><a class="reference internal" href="landsat.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="landsat.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modis.html">modis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modis.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="modis.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="radar.html">radar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="radar.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="radar.html#module-dnppy.radar.create_header">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="raster.html">raster</a><ul>
<li class="toctree-l2"><a class="reference internal" href="raster.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="raster.html#module-dnppy.raster.apply_linear_correction">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="solar.html">solar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="solar.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="solar.html#code-help">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="textio.html">textio</a><ul>
<li class="toctree-l2"><a class="reference internal" href="textio.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="textio.html#module-dnppy.textio.read_DS3505">Code Help</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">tsa</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-help">Code Help</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_pages/development.html">Developers Starter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/development.html#contributing-through-github">Contributing Through GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/development.html#integrated-development-environment">Integrated Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/development.html#stylistic-coding-conventions">Stylistic Coding Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_pages/dev_goals.html">Future Development Goals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/dev_goals.html#dump-arcpy">Dump arcpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/dev_goals.html#python-3">Python 3</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_pages/gdal_tips.html">Intro to gdal</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/gdal_tips.html#gdal-with-dnppy">gdal with dnppy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/gdal_tips.html#using-the-osr-to-manage-projections">Using the osr to manage projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/gdal_tips.html#geotransforms">Geotransforms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_pages/contrib_git.html">GitHub Best Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/contrib_git.html#what-to-include-in-a-git-repo">What to include in a Git repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/contrib_git.html#committing-to-the-master-branch">Committing to the <code class="docutils literal"><span class="pre">master</span></code> branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/contrib_git.html#versioning">Versioning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_pages/doc.html">Building Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/doc.html#documenting-new-additions">Documenting new additions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/doc.html#checking-the-docs">Checking the docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_pages/doc.html#building-the-docs">Building the docs</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Help and Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../trub/git.html">GitHub Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trub/pythonstarter.html">Python Quick-Starter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../trub/pythonstarter.html#the-right-mindset">The right mindset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trub/pythonstarter.html#frequent-pitfalls">Frequent Pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trub/pythonstarter.html#python-terminology">Python Terminology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trub/faq.html">Frequently Asked Questions</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">dnppy</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>tsa</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/modules/tsa.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="module-dnppy.tsa">
<span id="tsa"></span><h1>tsa<a class="headerlink" href="#module-dnppy.tsa" title="Permalink to this headline">¶</a></h1>
<p>The tsa (short for time series analysis) module is centered around the time_series
class. One or more time_series objects should be central to any data analysis
task that examines temporal relationships in data sets of raster or tabular
format. This module also houses the rast_series class, which is an extension of
time_series for handling filepaths to raster data.</p>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p class="rubric">time_series basics</p>
<p>Users with text data, or sequential raster images with identical spatial extents may wish to perform time specific operations on that data set. A time_series object may be easily used to perform tasks like subsetting, plotting, sorting, taking statistics, interpolating between values, sanitizing data for bad entries, and more.</p>
<p>This use case below is an example of using weather data downloaded from <a class="reference external" href="http://gis.ncdc.noaa.gov/map/viewer/#app=cdo&amp;cfg=cdo&amp;theme=hourly&amp;layers=1&amp;node=gi">this NOAA website</a>. Firstly, take a look at the format of this <a class="reference external" href="https://github.com/NASA-DEVELOP/dnppy/blob/master/dnppy/time_series/test_data/weather_example.csv">sample weather data</a>, and take special note of the column labeled <code class="docutils literal"><span class="pre">&quot;YR--MODAHRMN&quot;</span></code> and the format of it.</p>
<p>We want to parse this weather data, and perform a variety of manipulations on it, but first we have to get it into python. To see how this is done, open up your preferred interpreter (IDLE by default) and retype this code step by step.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">dnppy</span> <span class="kn">import</span> <span class="n">textio</span>

<span class="n">filepath</span> <span class="o">=</span> <span class="s">&quot;test_data/weather_dat.txt&quot;</span>       <span class="c"># define the text filepath</span>
<span class="n">tdo</span>      <span class="o">=</span> <span class="n">textio</span><span class="o">.</span><span class="n">read_DS3505</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>      <span class="c"># build a text data object</span>

<span class="k">print</span><span class="p">(</span><span class="n">tdo</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>                           <span class="c"># print the headers</span>
<span class="k">print</span><span class="p">(</span><span class="n">tdo</span><span class="o">.</span><span class="n">row_data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>                       <span class="c"># print the first row</span>
</pre></div>
</div>
<p>We now have <code class="docutils literal"><span class="pre">text_data</span></code> object. To read more about <code class="docutils literal"><span class="pre">text_data</span></code> objects, check out the <code class="docutils literal"><span class="pre">textio</span></code> module.
To turn this tdo into a <code class="docutils literal"><span class="pre">time_series</span></code>, we can do</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">dnppy</span> <span class="kn">import</span> <span class="n">tsa</span>                        <span class="c"># import the tsa module</span>

<span class="n">ts</span> <span class="o">=</span> <span class="n">tsa</span><span class="o">.</span><span class="n">time_series</span><span class="p">(</span><span class="s">&#39;weather_data&#39;</span><span class="p">)</span>
<span class="n">ts</span><span class="o">.</span><span class="n">from_tdo</span><span class="p">(</span><span class="n">tdo</span><span class="p">)</span>                             <span class="c"># use contents of the tdo</span>

<span class="k">print</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>                            <span class="c"># print the headers</span>
<span class="k">print</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">row_data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>                        <span class="c"># print the first row</span>
</pre></div>
</div>
<p>We can see that similar headers and the same row data can be found in the <code class="docutils literal"><span class="pre">time_series</span></code> object <code class="docutils literal"><span class="pre">ts</span></code>. Next we need to tell python how to interpret this data to assign times to each row. dnppy does this with python <code class="docutils literal"><span class="pre">datetime</span></code> objects from the native <code class="docutils literal"><span class="pre">datetime</span></code> module. The actual operations are hidden to the user, but we need to use <code class="docutils literal"><span class="pre">datetime</span></code> syntax to tell it how our dates are formatted like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">timecol</span> <span class="o">=</span> <span class="s">&quot;YR--MODAHRMN&quot;</span>                        <span class="c"># time data column header</span>
<span class="n">fmt</span>     <span class="o">=</span> <span class="s">&quot;%Y%m</span><span class="si">%d</span><span class="s">%H%M&quot;</span>                          <span class="c"># datetime format</span>

<span class="n">ts</span><span class="o">.</span><span class="n">define_time</span><span class="p">(</span><span class="n">timecol</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>                    <span class="c"># interpret strings</span>
<span class="n">ts</span><span class="o">.</span><span class="n">interogate</span><span class="p">()</span>                                 <span class="c"># print a heads up summary</span>
</pre></div>
</div>
<p>As we can see above, we are telling the <code class="docutils literal"><span class="pre">time_series</span></code> object <code class="docutils literal"><span class="pre">ts</span></code> to execute its internal <code class="docutils literal"><span class="pre">define_time</span></code> method with arguments specifying which column contains the time information, and the <code class="docutils literal"><span class="pre">fmt</span></code> string to use to interpret it. This specific <code class="docutils literal"><span class="pre">fmt</span></code> string is used to read strings such as <code class="docutils literal"><span class="pre">201307180054</span></code>, of format YYYYMMDDHHMMSS. <a class="reference external" href="https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior">read more on datetime formatting syntax</a></p>
<p>Now we can do cool stuff, like split it into subsets.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ts</span><span class="o">.</span><span class="n">make_subsets</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%d</span><span class="s">&quot;</span><span class="p">)</span>     <span class="c"># subset the data into daily chunks</span>
<span class="n">ts</span><span class="o">.</span><span class="n">interogate</span><span class="p">()</span>           <span class="c"># print a heads up summary</span>
</pre></div>
</div>
<p>As you can see from the report, there are now many &#8220;subsets&#8221; of this time series. Each of these subsets is actually its own <cite>time_series</cite> object! and all the same manipulations can be performed on them individually as can be performed on the whole series. Lets go ahead and do a quick plot of the temperature data in here.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ts</span><span class="o">.</span><span class="n">column_plot</span><span class="p">(</span><span class="s">&quot;TEMP&quot;</span><span class="p">)</span>  <span class="c"># no frills plot of temperature</span>
</pre></div>
</div>
<p>notice that we used the column name for temperature data from our weather file. This doesn&#8217;t make very pretty plots, so if we want, we can rename parameters. Lets say july 21st is the most interesting day and we want to see temperature and dewpoint next to eachtother, but we also want our plot to be a little prettier.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ts</span><span class="o">.</span><span class="n">rename_header</span><span class="p">(</span><span class="s">&quot;TEMP&quot;</span><span class="p">,</span><span class="s">&quot;Temperature&quot;</span><span class="p">)</span>          <span class="c"># give header better name</span>
<span class="n">ts</span><span class="o">.</span><span class="n">rename_header</span><span class="p">(</span><span class="s">&quot;DEWP&quot;</span><span class="p">,</span><span class="s">&quot;Dewpoint&quot;</span><span class="p">)</span>             <span class="c"># give header better name</span>

<span class="n">jul21</span> <span class="o">=</span> <span class="n">ts</span><span class="p">[</span><span class="s">&quot;2013-07-21&quot;</span><span class="p">]</span>                        <span class="c"># pull out subset july 21st</span>

<span class="n">jul21</span><span class="o">.</span><span class="n">column_plot</span><span class="p">([</span><span class="s">&quot;Temperature&quot;</span><span class="p">,</span><span class="s">&quot;Dewpoint&quot;</span><span class="p">],</span>   <span class="c"># make plot with labels</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Temperature and Dewpoint&quot;</span><span class="p">,</span>
        <span class="n">xlabel</span> <span class="o">=</span> <span class="s">&quot;Date and Time&quot;</span><span class="p">,</span>
        <span class="n">ylabel</span> <span class="o">=</span> <span class="s">&quot;Degrees F&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This is much better, but now we decide that we don&#8217;t just want july 21st, but also the days on either side of it. To do this, we can use an overlap_width in our subsetting command to make more of a moving window through this time series, centered around july 21st.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ts</span><span class="o">.</span><span class="n">make_subsets</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%d</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">overlap_width</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>       <span class="c"># subset with 1 overlap</span>
                <span class="n">discard_old</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>            <span class="c"># discard the old subsets</span>

<span class="n">ts</span><span class="o">.</span><span class="n">interogate</span><span class="p">()</span>                                <span class="c"># print a heads up summary</span>

<span class="n">jul21</span> <span class="o">=</span> <span class="n">ts</span><span class="p">[</span><span class="s">&quot;2013-07-21&quot;</span><span class="p">]</span>                       <span class="c"># pull july 21st subset</span>
<span class="n">jul21</span><span class="o">.</span><span class="n">column_plot</span><span class="p">([</span><span class="s">&quot;Temperature&quot;</span><span class="p">,</span><span class="s">&quot;Dewpoint&quot;</span><span class="p">],</span>  <span class="c"># save the plot this time</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Temperature and Dewpoint&quot;</span><span class="p">,</span>
        <span class="n">ylabel</span> <span class="o">=</span> <span class="s">&quot;Degrees F&quot;</span><span class="p">,</span>
        <span class="n">save_path</span> <span class="o">=</span> <span class="s">&quot;test.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we actually have three days in our <code class="docutils literal"><span class="pre">jul21</span></code> time series. And we are happy with this.
So far, this has only introduced you to about a third of the functionality available in the tsa module, but it should be enough to get you started. Consult the internal help docs and function list below to learn more!</p>
<p class="rubric">rast_series basics</p>
<p>The <code class="docutils literal"><span class="pre">rast_series</span></code> class is a child of <code class="docutils literal"><span class="pre">time_series</span></code> class, where each row in <code class="docutils literal"><span class="pre">rast_series.row_data</span></code> contains the values <code class="docutils literal"><span class="pre">[filepath,</span> <span class="pre">filename,</span> <span class="pre">fmt_name]</span></code> for a raster image.</p>
<p>There are some cool functions in the <code class="docutils literal"><span class="pre">raster</span></code> module that are tailored to time series type raster images, and the <code class="docutils literal"><span class="pre">rast_series</span></code> is a type of container to manage your raster data and pass it into more complex raster functions. This example is going to use example data following on from the <a class="reference external" href="https://nasa-develop.github.io/dnppy/modules/modis.html#examples">MODIS extracting and mosaicing example</a></p>
<p>A <code class="docutils literal"><span class="pre">rast_series</span></code> object can be created and populated with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">dnppy</span> <span class="kn">import</span> <span class="n">tsa</span>
<span class="n">rs</span> <span class="o">=</span> <span class="n">tsa</span><span class="o">.</span><span class="n">rast_series</span><span class="p">()</span>

<span class="n">rastdir</span>  <span class="o">=</span> <span class="s">r&quot;C:\Users\jwely\mosaics&quot;</span>  <span class="c"># directory of our MODIS mosaics</span>
<span class="n">fmt</span>      <span class="o">=</span> <span class="s">&quot;%Y%j&quot;</span>
<span class="n">fmt_mask</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span>

<span class="n">rs</span><span class="o">.</span><span class="n">from_directory</span><span class="p">(</span><span class="n">rastdir</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span> <span class="n">fmt_mask</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">rastdir</span></code> variable in this example is the same place our MODIS mosaics are stored from the MODIS mosaic example. The <code class="docutils literal"><span class="pre">fmt</span></code> variable should be familiar to you from the <code class="docutils literal"><span class="pre">time_series</span></code> example above, but the <code class="docutils literal"><span class="pre">fmt_mask</span></code> is new. The <code class="docutils literal"><span class="pre">fmt_mask</span></code> is simply a list of character locations within the filename strings where the information matching <code class="docutils literal"><span class="pre">fmt</span></code> can be found. Our filenames look something like <code class="docutils literal"><span class="pre">MOD10A1.A2015001.mosaic.005.2015006011526_FracSnowCover.tif</span></code>. And <code class="docutils literal"><span class="pre">fmt_mask</span></code> is simply telling us that characters 9 through 15 are where the date information can be found. Remember python counts up from zero.</p>
<p>For this example, we want to remove all values that are not telling us about the fractional snow cover on the ground. Since these values are represented by integers 1 through 100, we can set all other values to NoData with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rs</span><span class="o">.</span><span class="n">null_set_range</span><span class="p">(</span><span class="n">high_thresh</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">NoData_Value</span> <span class="o">=</span> <span class="mi">101</span><span class="p">)</span>
</pre></div>
</div>
<p>Which  simply calls <code class="docutils literal"><span class="pre">raster.null_set_range</span></code> on every image in this <code class="docutils literal"><span class="pre">rast_series</span></code>, and sets all numbers over 100 to equal 101, and sets 101 as the NoData_Value for these images. Now lets say we want rolling average type statistics, with a window 7 days wide to represent a week of data centered around any given day. We can divide the data in week long chunks (with overlap) in the same way we do with <code class="docutils literal"><span class="pre">time_series</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rs</span><span class="o">.</span><span class="n">make_subsets</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%d</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">overlap_width</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">rs</span><span class="o">.</span><span class="n">interrogate</span><span class="p">()</span>
</pre></div>
</div>
<p>An overlap width of three signifies grabbing three days on each side of the center day. And now to take the statistics with.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">statsdir</span> <span class="o">=</span> <span class="s">r&quot;C:\Users\jwely\statistics&quot;</span>   <span class="c"># directory to save our statistics</span>
<span class="n">rs</span><span class="o">.</span><span class="n">series_stats</span><span class="p">(</span><span class="n">statsdir</span><span class="p">)</span>
</pre></div>
</div>
<p>Which calls the <code class="docutils literal"><span class="pre">raster.many_stats</span></code> function on every subset in this <code class="docutils literal"><span class="pre">rast_series</span></code> object. Now we have weekly snapshots for each day in our data record!</p>
</div>
<div class="section" id="code-help">
<h2>Code Help<a class="headerlink" href="#code-help" title="Permalink to this headline">¶</a></h2>
<p>Auto-documentation for functions and classes within this module is generated below!</p>
<span class="target" id="module-dnppy.tsa.time_series"></span><dl class="class">
<dt id="dnppy.tsa.time_series.time_series">
<em class="property">class </em><code class="descname">time_series</code><span class="sig-paren">(</span><em>name='name'</em>, <em>units=None</em>, <em>subsetted=False</em>, <em>disc_level=0</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series" title="Permalink to this definition">¶</a></dt>
<dd><p>A subsettable time series object</p>
<p>The primary motivation for creating this object was to allow
a time series to be subsetted into any number of small chunks
but retain the ability to process and interrogate the time series
at any level with the exact same external syntax.</p>
<p>A time series object is comprised of a matrix of data, and may contain
an object list of subset time_series objects. Potentially unlimited
nesting of time series datasets is possible, for example: a years worth
of hourly data may be subsetted into 1-month time series, while each
of those is in turn subsetted into days. The highest level time series
will still allow opperations to be performed upon it.</p>
<p>All internal methods are built to handle this flexible definition of a
time series, where the steps of the method depend on weather the time
series is at its smallest subset or not.</p>
<p>MEMORY WARNING. The entirety of the dataset is represented in every layer
of subsetting, so watch out for exploding memory consumption by
excessive subsetting of gigantic datasets.</p>
<dl class="method">
<dt id="dnppy.tsa.time_series.time_series._build_time">
<code class="descname">_build_time</code><span class="sig-paren">(</span><em>time_header</em>, <em>fmt</em>, <em>start_date=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series._build_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series._build_time" title="Permalink to this definition">¶</a></dt>
<dd><p>This internal use function is called twice by &#8220;define_time&#8221;. Once to turn
all the datestamps into datetime objects, then a second time once the entire
dataset has been sorted in ascending time order by those datetime objects.</p>
<p>This is to ensure all time values are in terms of the correct start time,
which can be no later than the earliest entry in the dataset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time_header</strong> &#8211; name of column with time data in it</li>
<li><strong>fmt</strong> &#8211; the fmt string to interpret time data into datetime objects</li>
<li><strong>start_date</strong> &#8211; The date to count up from.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="dnppy.tsa.time_series.time_series._center_datetime">
<em class="property">static </em><code class="descname">_center_datetime</code><span class="sig-paren">(</span><em>datetime_obj</em>, <em>units</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series._center_datetime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series._center_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns datetime obj that is centered on the &#8220;unit&#8221; of the input datetime obj</p>
<p>When grouping datetimes together, center times are important. This function allows
a center time with units equal to the users input (years, months, days , ...) to be
generated from the first datetime of the time series.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>datetime_obj</strong> &#8211; any datetime object</li>
<li><strong>units</strong> &#8211; units by which to center input datetime object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return center_datetime:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last">returns centered datetime object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series._extract_time">
<code class="descname">_extract_time</code><span class="sig-paren">(</span><em>time_header</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series._extract_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series._extract_time" title="Permalink to this definition">¶</a></dt>
<dd><p>special case of &#8220;extract_column&#8221; method for time domain.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="dnppy.tsa.time_series.time_series._fmt_to_units">
<em class="property">static </em><code class="descname">_fmt_to_units</code><span class="sig-paren">(</span><em>in_fmt</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series._fmt_to_units"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series._fmt_to_units" title="Permalink to this definition">¶</a></dt>
<dd><p>converts fmt strings to unit names of associated datetime attributes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fmt</strong> &#8211; datetime object style unit characters like %Y or %m</td>
</tr>
<tr class="field-even field"><th class="field-name">Return units:</th><td class="field-body">english version of input format. Example %Y -&gt; &#8220;year&#8221;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series._get_atts_from">
<code class="descname">_get_atts_from</code><span class="sig-paren">(</span><em>parent_time_series</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series._get_atts_from"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series._get_atts_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows bulk setting of attributes. Useful for allowing a subset to inherit
information from its parent time_series</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>parent_time_series</strong> &#8211; a time_series object from which to inherit</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series._name_as_subset">
<code class="descname">_name_as_subset</code><span class="sig-paren">(</span><em>binned=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series._name_as_subset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series._name_as_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>uses time series object to descriptively name itself. Naming
subsets as bins will name them based only on smallest unit of
discretization.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>binned</strong> &#8211; set to True to name subsets as bins</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="dnppy.tsa.time_series.time_series._seconds_to_units">
<em class="property">static </em><code class="descname">_seconds_to_units</code><span class="sig-paren">(</span><em>seconds</em>, <em>units</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series._seconds_to_units"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series._seconds_to_units" title="Permalink to this definition">¶</a></dt>
<dd><p>converts seconds to other time units</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>seconds</strong> &#8211; number of seconds</li>
<li><strong>units</strong> &#8211; units to convert those seconds to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">time equivalent of input seconds expressed as input units</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="dnppy.tsa.time_series.time_series._units_to_fmt">
<em class="property">static </em><code class="descname">_units_to_fmt</code><span class="sig-paren">(</span><em>units</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series._units_to_fmt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series._units_to_fmt" title="Permalink to this definition">¶</a></dt>
<dd><p>converts unit names to fmt strings used by datetime.stftime.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>units</strong> &#8211; units are strings like &#8220;year&#8221;, &#8220;month&#8221;, &#8220;hour&#8221;</td>
</tr>
<tr class="field-even field"><th class="field-name">Return fmt:</th><td class="field-body">returns &#8220;fmt&#8221; equivalent of english units</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series._units_to_seconds">
<code class="descname">_units_to_seconds</code><span class="sig-paren">(</span><em>units</em>, <em>dto=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series._units_to_seconds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series._units_to_seconds" title="Permalink to this definition">¶</a></dt>
<dd><p>converts other time units to seconds</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>units</strong> &#8211; some english unit such as &#8220;hour&#8221;, &#8220;day&#8221;, etc.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return seconds:</th><td class="field-body">the numer of seconds in an input unit</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.add_mono_time">
<code class="descname">add_mono_time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.add_mono_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.add_mono_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a monotonically increasing time column with units of decimal days</p>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.build_col_data">
<code class="descname">build_col_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.build_col_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.build_col_data" title="Permalink to this definition">¶</a></dt>
<dd><p>builds columnwise data matrix with an actual dict</p>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.clean">
<code class="descname">clean</code><span class="sig-paren">(</span><em>col_header</em>, <em>high_thresh=False</em>, <em>low_thresh=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.clean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes rows where the specified column has an invalid number
or is outside the defined thresholds (above high_thresh or below low_thresh)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>col_header</strong> &#8211; name of column to clean</li>
<li><strong>high_thresh</strong> &#8211; maximum valid value of data in that column</li>
<li><strong>low_thresh</strong> &#8211; minimum valid value of data in that column</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.column_plot">
<code class="descname">column_plot</code><span class="sig-paren">(</span><em>col_headers</em>, <em>title=''</em>, <em>xlabel=''</em>, <em>ylabel=''</em>, <em>save_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.column_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.column_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>plots a specific column or column(s) by header name</p>
<p>Accepts custom title input and y-axis label. If a save_path is
specified, it will save the plot to that path and close it automatically.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>col_headers</strong> &#8211; list of columns to plot</li>
<li><strong>title</strong> &#8211; title to place on plot</li>
<li><strong>xlabel</strong> &#8211; label for x axis</li>
<li><strong>ylabel</strong> &#8211; label for y axis</li>
<li><strong>save_path</strong> &#8211; filepath at which to save figure as image.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.column_stats">
<code class="descname">column_stats</code><span class="sig-paren">(</span><em>col_header</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.column_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.column_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>takes statistics on a specific column of data</p>
<p>creates object attributes according to the column name. for example:</p>
<p>for col_header = &#8220;temperature&#8221;, the following attribute are created</p>
<p>self.temperature_max_v      # maximum value
self.temperature_min_v      # minimum value
self.temperature_max_i      # index value where maximum occurs
self.temperature_min_i      # index value where minimum occurs
self.temperature_avg        # average
self.temperature_std        # standard deviation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>col_header</strong> &#8211; name of column on which to take statistics</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return statistics:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">a dictionary of the column statistical values</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.define_time">
<code class="descname">define_time</code><span class="sig-paren">(</span><em>time_header</em>, <em>fmt</em>, <em>start_date=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.define_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.define_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts time strings into time objects for standardized processing. For tips
on how to use &#8216;fmt&#8217; variable, see
[<a class="reference external" href="https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior">https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior</a>]</p>
<p>Time header variable can be either the header string, or a column index num</p>
<dl class="docutils">
<dt>Creates</dt>
<dd>A converted list of time objects (self.time_dom)
A new list of monotonically increasing decimal days (self.time_dec_days)
A new list of monotonically increasing second values (self.time_seconds)</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time_header</strong> &#8211; name of column with time data in it</li>
<li><strong>fmt</strong> &#8211; the fmt string to interpret time data into datetime objects</li>
<li><strong>start_date</strong> &#8211; The date to count up from.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.from_csv">
<code class="descname">from_csv</code><span class="sig-paren">(</span><em>filepath</em>, <em>delim='</em>, <em>'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.from_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple reader of a delimited file. To read more complex text data
into a time series object, use a custom reader function to return
a text_data_class object and feed it into this time series with</p>
<p>time_series_object.from_tdo(text_data_object)</p>
<p>To read csvs straight to a time_series object, it must have headers.</p>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.from_list">
<code class="descname">from_list</code><span class="sig-paren">(</span><em>data</em>, <em>headers</em>, <em>time_header</em>, <em>fmt</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.from_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.from_list" title="Permalink to this definition">¶</a></dt>
<dd><p>creates the time series data from a list</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> &#8211; list of lists making up rows and columns of data</li>
<li><strong>headers</strong> &#8211; list of headers (column names)</li>
<li><strong>time_header</strong> &#8211; string of header over the column representing time</li>
<li><strong>fmt</strong> &#8211; the format of data in that time column</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.from_tdo">
<code class="descname">from_tdo</code><span class="sig-paren">(</span><em>tdo</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.from_tdo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.from_tdo" title="Permalink to this definition">¶</a></dt>
<dd><p>reads time series data from a dnppy.text_data_class object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tdo</strong> &#8211; a dnppy.text_data_class object containing time data</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.group_bins">
<code class="descname">group_bins</code><span class="sig-paren">(</span><em>fmt_units</em>, <em>overlap_width=0</em>, <em>cyclical=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.group_bins"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.group_bins" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts the time series into time chunks by common bin_unit</p>
<p>used for grouping data rows together. For example, if one used
this function on a 5 year dataset with a bin_unit of month,
then the time_series would be subseted into 12 sets (1 for each
month), which each set containing all entries for that month,
regardless of what year they occurred in.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fmt_units</strong> &#8211; %Y  groups files by year
%m  groups files by month
%j  groups file by julian day of year</li>
<li><strong>overlap_width</strong> &#8211; similarly to &#8220;make_subsets&#8221; the &#8220;overlap_width&#8221; variable can be
set to greater than 1 to allow &#8220;window&#8221; type statistics, so
each subset may contain data points from adjacent subsets.
However, for group_bins, overlap_width must be an integer.</li>
<li><strong>cyclical</strong> &#8211; &#8220;cyclical&#8221; of &#8220;True&#8221; will allow end points to be considered adjacent.
So, for example, January will be considered adjacent to December,
day 1 will be considered adjacent to day 365.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.interp_col">
<code class="descname">interp_col</code><span class="sig-paren">(</span><em>time_obj</em>, <em>col_header</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.interp_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.interp_col" title="Permalink to this definition">¶</a></dt>
<dd><p>For input column, interpolate values to estimate value at input time_obj.
input time_obj may also be of datestring matching declared fmt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>time_obj</strong> &#8211; A datetime object</li>
<li><strong>col_header</strong> &#8211; The name of the column to interpolate at time (time_obj)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return interp_y:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last">The interpolated value of input column at input time</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.interrogate">
<code class="descname">interrogate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.interrogate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.interrogate" title="Permalink to this definition">¶</a></dt>
<dd><p>prints a heads up stats table of all subsets in this time_series</p>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.make_subsets">
<code class="descname">make_subsets</code><span class="sig-paren">(</span><em>subset_units</em>, <em>overlap_width=0</em>, <em>cust_center_time=False</em>, <em>discard_old=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.make_subsets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.make_subsets" title="Permalink to this definition">¶</a></dt>
<dd><p>splits the time series into individual time chunks</p>
<p>used for taking advanced statistics, usually periodic
in nature. Also useful for exploiting temporal relationships
in a dataset for a variety of purposes including data
sanitation, periodic curve fitting, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>subset_units</strong> &#8211; subset_units follows convention of fmt. For example:
%Y  groups files by year
%m  groups files by month
%j  groups file by julian day of year</li>
<li><strong>overlap_width</strong> &#8211; <p>this variable can be set to greater than 0
to allow &#8220;window&#8221; type statistics, so each subset may contain 
data points from adjacent subsets.</p>
<p>overlap_width = 1 is like a window size of 3
overlap_width = 2 is like a window size of 5</p>
<p>WARNING: this function is imperfect for making subsets by months.
the possible lengths of a month are extremely variant, so sometimes
data points at the ends of a month will get placed in the adjacent
month. If you absolutely require accurate month subsetting,
you should use this function to subset by year, then use the
&#8220;group_bins&#8221; function to bin each year by month. so,</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ts</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="s">&quot;%b&quot;</span><span class="p">)</span>     <span class="c"># subset by month</span>

<span class="n">ts</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="s">&quot;%Y&quot;</span><span class="p">)</span>     <span class="c"># subset by year</span>
<span class="n">ts</span><span class="o">.</span><span class="n">group_bins</span><span class="p">(</span><span class="s">&quot;%b&quot;</span><span class="p">)</span> <span class="c"># bin by month</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cust_center_time</strong> &#8211; Allows a custom center time to be used! This was added so that
days could be centered around a specific daily acquisition time.
for example, its often useful to define a day as
satellite data acquisition time +/- 12 hours.
if used, &#8220;cust_center_time&#8221; must be a datetime object!</li>
<li><strong>discard_old</strong> &#8211; By default, performing a subsetting on a time series that already
has subsets does not subset the master time series, but instead
the lowest level subsets. Setting &#8220;discard_old&#8221; to &#8220;True&#8221; will
discard all previous subsets of the time series and start subsetting
from scratch.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.merge_cols">
<code class="descname">merge_cols</code><span class="sig-paren">(</span><em>header1</em>, <em>header2</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.merge_cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.merge_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>merges two columns together (string concatenation) into a new column.
The new column will be named [header1]_[header2].</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>header1</strong> &#8211; the name of the 1st column to merge</li>
<li><strong>header2</strong> &#8211; the name of the 2nd column to merge</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.normalize">
<code class="descname">normalize</code><span class="sig-paren">(</span><em>col_header</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.normalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to normalize specific columns in the time series. Normalization
will scale all value in the time series to be between 0 and 1</p>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.rebuild">
<code class="descname">rebuild</code><span class="sig-paren">(</span><em>destroy_subsets=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.rebuild"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.rebuild" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconstructs the time series from its constituent subsets</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>destroy_subsets</strong> &#8211; Set to TRUE to destroy the existing subsets
of the time series, which will allow them to
rebuilt in a different manner.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.rename_header">
<code class="descname">rename_header</code><span class="sig-paren">(</span><em>header_name</em>, <em>new_header_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.rename_header"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.rename_header" title="Permalink to this definition">¶</a></dt>
<dd><p>renames a header and updates data structures</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>header_name</strong> &#8211; name of an existing header</li>
<li><strong>new_header_name</strong> &#8211; new name of that header</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.subset_stats">
<code class="descname">subset_stats</code><span class="sig-paren">(</span><em>col_header</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.subset_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.subset_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new time_series object, which is built from column statistics of this
time_series&#8217;s subsets. For example:</p>
<p>Lets say we have a years worth of hourly temperature data, and we want to get
daily summaries of temperature statistics. To do this, the syntax would look
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">temperature_ts</span><span class="o">.</span><span class="n">make_subsets</span><span class="p">(</span><span class="o">%</span><span class="n">d</span><span class="p">)</span>
<span class="n">daily_sum_ts</span> <span class="o">=</span> <span class="n">temperature_ts</span><span class="o">.</span><span class="n">subset_stats</span><span class="p">(</span><span class="s">&quot;Temp&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This function is not yet finished.</p>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.time_series.time_series.to_csv">
<code class="descname">to_csv</code><span class="sig-paren">(</span><em>csv_path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/time_series.html#time_series.to_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.time_series.time_series.to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the row data of this time_series to a csv file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>csv_path</strong> &#8211; filepath at which to create new csv file.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="module-dnppy.tsa.rast_series"></span><dl class="class">
<dt id="dnppy.tsa.rast_series.rast_series">
<em class="property">class </em><code class="descname">rast_series</code><span class="sig-paren">(</span><em>name='name'</em>, <em>units=None</em>, <em>subsetted=False</em>, <em>disc_level=0</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/rast_series.html#rast_series"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.rast_series.rast_series" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an extension of the time_series class</p>
<p>It is built to handle just like a time_series object, with
the simplification that the &#8220;row_data&#8221; attribute, is comprised
of nothing more than filepaths and filenames. All attributes
for tracking the time domain are the same.</p>
<p>some time_series methods for manipulating and viewing text data
will not apply to raster_series. It is unknown how they will behave.</p>
<dl class="method">
<dt id="dnppy.tsa.rast_series.rast_series.from_directory">
<code class="descname">from_directory</code><span class="sig-paren">(</span><em>directory</em>, <em>fmt</em>, <em>fmt_unmask=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/rast_series.html#rast_series.from_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.rast_series.rast_series.from_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>creates a list of all rasters in a directory, then passes this
list to self.from_rastlist</p>
<p>see <code class="docutils literal"><span class="pre">from_rastlist</span></code></p>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.rast_series.rast_series.from_rastlist">
<code class="descname">from_rastlist</code><span class="sig-paren">(</span><em>filepaths</em>, <em>fmt</em>, <em>fmt_unmask=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/rast_series.html#rast_series.from_rastlist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.rast_series.rast_series.from_rastlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads up a list of filepaths as a time series. If filenames contain
variant characters that are not related to date and time, a
&#8220;fmt_unmask&#8221; may be used to isolate the datestrings from the rest
of the filenames by character index.</p>
<p>For an example filename <code class="docutils literal"><span class="pre">&quot;MYD11A1.A2013001_day_clip_W05_C2014001_Avg_K_C_p_GSC.tif&quot;</span></code>
We only want the part with the year and julian day in it <code class="docutils literal"><span class="pre">&quot;2013001&quot;</span></code>
So we can use</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">fmt</span>        <span class="o">=</span> <span class="s">&quot;%Y%j&quot;</span>
<span class="n">fmt_unmask</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">16</span><span class="p">]</span>
</pre></div>
</div>
<p>To indicate that we only want the 10th through 16th characters of the filenames
to be used for anchoring each raster in a physical time.</p>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.rast_series.rast_series.group_bins">
<code class="descname">group_bins</code><span class="sig-paren">(</span><em>fmt_units</em>, <em>overlap_width=0</em>, <em>cyclical=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/rast_series.html#rast_series.group_bins"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.rast_series.rast_series.group_bins" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts the time series into time chunks by common bin_unit</p>
<p>used for grouping data rows together. For example, if one used
this function on a 5 year dataset with a bin_unit of month,
then the time_series would be subseted into 12 sets (1 for each
month), which each set containing all entries for that month,
regardless of what year they occurred in.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fmt_units</strong> &#8211; %Y  groups files by year
%m  groups files by month
%j  groups file by julian day of year</li>
<li><strong>overlap_width</strong> &#8211; similarly to &#8220;make_subsets&#8221; the &#8220;overlap_width&#8221; variable can be
set to greater than 1 to allow &#8220;window&#8221; type statistics, so
each subset may contain data points from adjacent subsets.
However, for group_bins, overlap_width must be an integer.</li>
<li><strong>cyclical</strong> &#8211; &#8220;cyclical&#8221; of &#8220;True&#8221; will allow end points to be considered adjacent.
So, for example, January will be considered adjacent to December,
day 1 will be considered adjacent to day 365.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.rast_series.rast_series.make_subsets">
<code class="descname">make_subsets</code><span class="sig-paren">(</span><em>subset_units</em>, <em>overlap_width=0</em>, <em>cust_center_time=False</em>, <em>discard_old=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/rast_series.html#rast_series.make_subsets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.rast_series.rast_series.make_subsets" title="Permalink to this definition">¶</a></dt>
<dd><p>splits the time series into individual time chunks</p>
<p>used for taking advanced statistics, usually periodic
in nature. Also useful for exploiting temporal relationships
in a dataset for a variety of purposes including data
sanitation, periodic curve fitting, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>subset_units</strong> &#8211; subset_units follows convention of fmt. For example:
%Y  groups files by year
%m  groups files by month
%j  groups file by julian day of year</li>
<li><strong>overlap_width</strong> &#8211; <p>this variable can be set to greater than 0
to allow &#8220;window&#8221; type statistics, so each subset may contain
data points from adjacent subsets.</p>
<p>overlap_width = 1 is like a window size of 3
overlap_width = 2 is like a window size of 5</p>
<p>WARNING: this function is imperfect for making subsets by months.
the possible lengths of a month are extremely variant, so sometimes
data points at the ends of a month will get placed in the adjacent
month. If you absolutely require accurate month subsetting,
you should use this function to subset by year, then use the
&#8220;group_bins&#8221; function to bin each year by month. so,</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ts</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="s">&quot;%b&quot;</span><span class="p">)</span>     <span class="c"># subset by month</span>

<span class="n">ts</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="s">&quot;%Y&quot;</span><span class="p">)</span>     <span class="c"># subset by year</span>
<span class="n">ts</span><span class="o">.</span><span class="n">group_bins</span><span class="p">(</span><span class="s">&quot;%b&quot;</span><span class="p">)</span> <span class="c"># bin by month</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cust_center_time</strong> &#8211; Allows a custom center time to be used! This was added so that
days could be centered around a specific daily acquisition time.
for example, its often useful to define a day as
satellite data acquisition time +/- 12 hours.
if used, &#8220;cust_center_time&#8221; must be a datetime object!</li>
<li><strong>discard_old</strong> &#8211; By default, performing a subsetting on a time series that already
has subsets does not subset the master time series, but instead
the lowest level subsets. Setting &#8220;discard_old&#8221; to &#8220;True&#8221; will
discard all previous subsets of the time series and start subsetting
from scratch.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.rast_series.rast_series.null_set_range">
<code class="descname">null_set_range</code><span class="sig-paren">(</span><em>high_thresh=None</em>, <em>low_thresh=None</em>, <em>NoData_Value=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/rast_series.html#rast_series.null_set_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.rast_series.rast_series.null_set_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the dnppy.raster.null_set_range() function to every raster in rast_series</p>
</dd></dl>

<dl class="method">
<dt id="dnppy.tsa.rast_series.rast_series.series_stats">
<code class="descname">series_stats</code><span class="sig-paren">(</span><em>outdir, saves=['AVG', 'NUM', 'STD', 'SUM'], low_thresh=None, high_thresh=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dnppy/tsa/rast_series.html#rast_series.series_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dnppy.tsa.rast_series.rast_series.series_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the dnppy.raster.many_stats() function to each
of the lowest level subsets of this rast_series.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../dev_pages/development.html" class="btn btn-neutral float-right" title="Developers Starter">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="textio.html" class="btn btn-neutral" title="textio"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.15.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>